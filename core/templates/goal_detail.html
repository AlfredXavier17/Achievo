{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>{{ goal.title }} – Achievo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">

    <div class="container mt-5">
        <a href="/" class="btn btn-outline-light mb-3">← Back to Home</a>
        <div class="mb-3">
            <input type="text" id="goal-title" class="form-control form-control-lg bg-dark text-light border-secondary"
                value="{{ goal.title }}" data-goal-id="{{ goal.id }}">
        </div>

        <div class="mb-3">
            <textarea id="goal-description" class="form-control bg-dark text-light border-secondary" rows="4"
                data-goal-id="{{ goal.id }}">{{ goal.description }}</textarea>
        </div>

        <small class="text-muted">Created: {{ goal.created_at|date:"F j, Y – g:i A" }}</small>
        <hr>

        <h3 class="mb-3">📝 Journal Entries</h3>
        <a href="{% url 'add_journal' goal.id %}" class="btn btn-primary mb-4">+ Add Journal Entry</a>

        {% if journals %}
            <div class="row row-cols-1 g-3">
                {% for journal in journals %}
                    <div class="col">
                        <a href="{% url 'journal_detail' journal.id %}" class="text-decoration-none">
                            <div class="card bg-secondary text-white shadow-sm p-3 rounded">
                                <h5 class="mb-2">{{ journal.title|default:"New Entry" }}</h5>
                                <small class="text-light">{{ journal.created_at|date:"F j, Y – g:i A" }}</small>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-muted">No journal entries yet.</p>
        {% endif %}
    </div>

    <script id="goal-data" type="application/json">{{ goal.id }}</script>
    <script src="{% static 'core/goalAutoSave.js' %}"></script>        
</body>
</html>
